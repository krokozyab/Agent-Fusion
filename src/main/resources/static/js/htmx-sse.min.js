/*
HTMX SSE Extension - Handles out-of-band swaps using sse-swap attributes
*/
!function(e){if(!e)return;var t={init:function(e){console.debug("HTMX SSE extension loaded")},onEvent:function(e,t){if(!e||!e.startsWith("sse:"))return false;var n=e.substring(4);return t.detail.lastEvent===n||t.detail.eventType===n}};e.defineExtension("sse",t);var n=e.ajax;e.ajax=function(e,t,r,o){if(r&&r.sse&&r.sse.swap){var s=r.sse.swap;r.onEvent=function(e,t){if(t.detail){var r=t.detail;if(r.lastEvent===s||r.eventType===s){return true}}return false}}return n(e,t,r,o)};document.addEventListener("htmx:sseMessage",function(e){try{if(e.detail){var t=e.detail;console.log("SSE Message received - lastEvent:",t.lastEvent,"eventType:",t.eventType,"data length:",t.data?t.data.length:0);var n=t.lastEvent||t.eventType;if(n){var r=document.querySelector('[sse-swap="'+n+'"]');if(r){console.log("Found swap target for event:",n);var a=document.createElement("div");a.innerHTML=t.data;var s=a.firstElementChild||a;if(s){console.log("Performing swap for element:",r.id||r.className);r.outerHTML=s.outerHTML}}else{console.log("No swap target found for event:",n," available targets:",[].slice.call(document.querySelectorAll("[sse-swap]")).map(function(e){return e.getAttribute("sse-swap")}))}}}}catch(e){console.error("Error processing SSE message:",e)}});var a=function(e){return new EventSource(e,{withCredentials:true})};if(e.createEventSource){var i=e.createEventSource;e.createEventSource=function(e){console.debug("Creating EventSource");return a(e)}}else{e.createEventSource=a}}(window.htmx);
